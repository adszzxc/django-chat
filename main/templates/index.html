{% extends "base.html" %}
{% load staticfiles %}
{% block content %}
	<div class="container-fluid">
		<div class="row">
			<div class="col-sm-4"></div>
			<div class="col-sm-4">
			<!-- <h3 id="headertext" style="color: white;">Django Chat</h3></div> -->
			<img src="{% static "worktitle.png" %}" class="img-fluid" alt="Responsive image">
			<div class="col-sm-4"></div>
		</div>
		</div>
		<div class="row">
			<div class="col-sm-3"></div>
				<div class="col-sm-2 p-0">
					<div  id="chat-personalinfo" class="w-100">
					<div>
							<img id="profileimage" src="{{ request.user.avatar.url }}" width=120 height=120 class="d-inline rounded p-1 img-responsive"/>
							<div class="d-inline pl-5">{{ request.user.usercode }}</div>
					</div>	
					</div>
					<div id="chat-rollup" class="w-100 d-block"><span class="text-center">roll up</span></div>
				<div id="chat-contacts" class="w-100 mh-50 d-block p-1">
					{% for friend in request.user.friends.all %}
						<div class="friend-panel" id="{{ friend.usercode }}">
							<div class="text-center">
							<span>{{ friend.nickname }}<br>{{ friend.usercode }}</span>
							</div>
						</div>
					{% endfor %}
				</div>
				</div>
				<div class="col-sm-4 p-0">
				<div id="chat-topspace" class="w-100 text-center">
					<span class="text-center" style="color: white;">{{ request.user.nickname }} ({{ request.user.usercode }})</span>
				</div>
					<div id="chat-messengerblock" class="w-100 mh-75">
						<div class="w-100 d-block p-3" style="height: 59%" id="">
							<div class="h-100 w-100" id="messagefield"></div>
						</div>
						<div class="w-100 d-block" id="inputfield">
							<textarea class="d-inline w-75" style="resize: none; padding-bottom: 0;"></textarea>
							<input class="d-inline" type="submit" value="send a message"></input>
						</div>
					</div>
				</div>
			</div>
			<div class="col-sm-3"></div>
		</div>
	</div>
<script type="text/javascript">
var usercode = "{{ request.user.usercode }}";
var rolled = 0;
$("#chat-rollup").click(function(){

	if (rolled == 0){
		$("#chat-contacts").slideUp("fast", function(){
			$("#chat-contacts").removeClass("d-block");
			$("#chat-contacts").addClass("d-none");
			rolled = rolled + 1;
		}
		);
	}
	else{
		$("#chat-contacts").removeClass("d-none");
		$("#chat-contacts").addClass("d-block");
		$("#chat-contacts").slideDown("fast", function(){
			rolled = rolled - 1;
	})
}});
</script>
{% endblock %}